<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>
	<p id="test">TESTING</p>
</body>
<script type="text/javascript">
	// Baca file JSON yang berisi model
class NaiveBayesClassifier {
    constructor() {
        this.classCounts = {};
        this.featureCounts = {};
        this.featureProbabilities = {};
    }

    train(data) {
        data.forEach(entry => {
            const { features, label } = entry;
            if (!this.classCounts[label]) this.classCounts[label] = 0;
            this.classCounts[label]++;
            features.forEach(feature => {
                if (!this.featureCounts[feature]) this.featureCounts[feature] = {};
                if (!this.featureCounts[feature][label]) this.featureCounts[feature][label] = 0;
                this.featureCounts[feature][label]++;
            });
        });

        Object.keys(this.featureCounts).forEach(feature => {
            this.featureProbabilities[feature] = {};
            Object.keys(this.classCounts).forEach(label => {
                const count = this.featureCounts[feature][label] || 0;
                const total = this.classCounts[label];
                this.featureProbabilities[feature][label] = count / total;
            });
        });
    }

    classify(input) {
        const labelScores = {};
        Object.keys(this.classCounts).forEach(label => {
            labelScores[label] = 0;
            input.forEach(feature => {
                if (this.featureProbabilities[feature] && this.featureProbabilities[feature][label]) {
                    labelScores[label] += Math.log(this.featureProbabilities[feature][label]);
                }
            });
            labelScores[label] += Math.log(this.classCounts[label]);
        });
        return Object.keys(labelScores).reduce((bestLabel, label) => labelScores[label] > labelScores[bestLabel] ? label : bestLabel);
    }
}
	fetch('naive_bayes_model.json')
	  .then(response => response.json())
	  .then(modelData => {
	    // Parsing data model
	    const features = modelData.features;
	    const labels = modelData.labels;
	    // Inisialisasi model Naive Bayes untuk NLU
	    const classifier = new NaiveBayesClassifier(features, labels);

	    // Contoh teks yang akan diproses
	    const text = "Berapa umur kamu";

	    // Lakukan klasifikasi teks
	    const classification = classifier.classify(text);
	    console.log('Classification:', classification);
	  })
	  .catch(error => console.error('Error loading model:', error));
</script>
</html>
